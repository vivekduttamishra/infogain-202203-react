<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Document</title>
    <script src="books.js"></script>
    <script src = "db.js"></script>

</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Book's Web </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="addbook.html">Add Book</a>
                    </li>

                </ul>
            </div>
        </div>
    </nav>
    <div class="container show">
        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-6">
                
                <form>
                    <label><b>Title:</b></label>
                    <input type="text" placeholder="Title" class="form-control"><br>
                    <label><b>Author:</b></label>
                    <input type="text" placeholder="Author" class="form-control"><br>
                    <label><b>Price:</b></label>
                    <input type="text" placeholder="Price" class="form-control"><br>
                    <label><b>Rating:</b></label>
                    <input type="text" placeholder="Rating" class="form-control"><br><br>
                    <label><b>Cover:</b></label>
                    <input type="file" class="form-control" style="
                    height: 44px;"><br> <br><br> <br>
                    <label><b>ISBN:</b></label>
                    <input type="text" placeholder="ISBN" class="form-control"><br>
                   <label><b>Description:</b></label>
                    <textarea type="text" placeholder="Description" class="form-control"></textarea><br><br>
                   <button type="button" class="btn" id="save-btn" style="float: right;">Save</button>

                </form>
            </div>
            <div class="col-md-4"></div>

        </div>


    </div>

    <footer class="footer">
        <div class="text-center side">
            <h5 class="text-white">Â© <a href="#">booksweb.org</a> </h5>
        </div>
    </footer>

    <script type="text/javascript">
        (function()
        {
            var bookDetails = {
                title: "",
                author: "",
                price: 0,
                rating: "",
                isbn: "",
                coverphoto: "",
                description: ""
            };
    
            var storageLogic = {
                saveItem: function (){
                    var lscount = localStorage.length;
                    var inputs = document.getElementsByClassName("form-control");
                    bookDetails.title = inputs[0].value;
                    console.log("bookDetails",  bookDetails.title);
                    bookDetails.author = inputs[1].value;
                    bookDetails.price = inputs[2].value;
                    bookDetails.rating = inputs[3].value;
                    bookDetails.isbn = inputs[4].value;
                    bookDetails.coverphoto = inputs[5].value;
                    bookDetails.description = inputs[6].value;
    
                    localStorage.setItem("bookDetails_" + lscount, JSON.stringify(bookDetails));
                    location.reload();
                    console.log("bookDetails", bookDetails);
    
                },
    
                // loaddata: function() {
                //     var datacount = localStorage.length;
                //     if (datacount > 0)
                //     {
                //         var render = "<table border='1'>";
                //         render += "<tr><th>Cover</th><th>Title</th><th>Author</th>";
                //         for (i=0; i < datacount; i++) {
                //             var key = localStorage.key(i);
                //             var bookDetails = localStorage.getItem(key);
                //             var data = JSON.parse(bookDetails);
    
                //             render += "<tr><td>" + data.coverphoto + "</td>";
                //             render += "<td>" + data.author + "</td>";
                //             render += "<td>" + data.title + "</td>";
                //             // render += "<td>" + data.email + "</td>";
                //         }
                //         render += "</table>";
                //         var newTable = document.getElementById("dvContainer");
                //         newTable.innerHTML = render;
                //     }
                // }
            };
            window.onload = function() {
                // storageLogic.loaddata();
          var btnsubmit = document.getElementById('save-btn');
          btnsubmit.addEventListener('click', storageLogic.saveItem, false);
            };
        })();

      </script>

</body>

</html>